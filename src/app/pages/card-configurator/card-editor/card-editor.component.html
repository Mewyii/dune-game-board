<!-- imperium-card-form.component.html -->
<form [formGroup]="imperiumCardForm">
  <div class="form-group" formGroupName="name">
    <mat-form-field class="medium-text-field">
      <mat-label>Name (English)</mat-label>
      <input matInput formControlName="en" />
    </mat-form-field>
    <mat-form-field class="medium-text-field">
      <mat-label>Name (German)</mat-label>
      <input matInput formControlName="de" />
    </mat-form-field>
  </div>

  <!-- Faction -->
  <mat-form-field>
    <mat-label>Faction</mat-label>
    <mat-select formControlName="faction">
      <mat-option *ngFor="let faction of factions" [value]="faction">{{ faction }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Persuasion Costs -->
  <mat-form-field>
    <mat-label>Persuasion Costs</mat-label>
    <input matInput formControlName="persuasionCosts" type="number" />
  </mat-form-field>

  <!-- Field Access -->
  <mat-form-field>
    <mat-label>Field Access</mat-label>
    <mat-select formControlName="fieldAccess" multiple>
      <mat-option *ngFor="let actionType of actionTypes; let i = index" [value]="actionType">
        {{ actionType }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <!-- Agent Effects -->
  <div class="card-effect-container">
    Agent Effect
    <mat-checkbox
      [(ngModel)]="hasCustomAgentEffect"
      [ngModelOptions]="{ standalone: true }"
      (ngModelChange)="updateAgentEffects()"
      >Custom</mat-checkbox
    >
    <div *ngIf="!hasCustomAgentEffect" formArrayName="agentEffects">
      <div class="form-group" *ngFor="let agentEffect of agentEffects.controls; let i = index">
        <mat-form-field>
          <mat-label>Agent Effect Type</mat-label>
          <mat-select [formControl]="getAgentEffectTypeControl(i)">
            <mat-option *ngFor="let rewardType of rewardTypes" [value]="rewardType">{{ rewardType }}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Agent Effect Amount</mat-label>
          <input matInput [formControl]="getAgentEffectAmountControl(i)" type="number" />
        </mat-form-field>
        <button mat-mini-fab [color]="'accent'" (click)="onRemoveAgentEffectClicked(i)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
      <button mat-mini-fab [color]="'accent'" (click)="onAddAgentEffectClicked()">
        <mat-icon>add</mat-icon>
      </button>
    </div>
    <div *ngIf="hasCustomAgentEffect" class="form-group" formGroupName="customAgentEffect">
      <mat-form-field class="large-text-field">
        <mat-label>Custom Agent Effect (English)</mat-label>
        <input matInput formControlName="en" />
      </mat-form-field>
      <mat-form-field class="large-text-field">
        <mat-label>Custom Agent Effect (German)</mat-label>
        <input matInput formControlName="de" />
      </mat-form-field>
    </div>
  </div>

  <mat-form-field class="large-text-field">
    <mat-label>Image URL</mat-label>
    <input matInput formControlName="imageUrl" />
  </mat-form-field>
</form>
